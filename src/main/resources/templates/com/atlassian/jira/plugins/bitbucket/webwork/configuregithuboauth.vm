<html>
  <head>
    <title>GitHub OAuth Settings</title>
  </head>

  <body>

       #set($baseurl = $action.getBaseUrl())

        
        <h3>GitHub OAuth Settings</h3>

            <div id='gh_config_link'>
                <a href="${baseurl}/secure/admin/ConfigureBitbucketRepositories!default.jspa">Bulk Configure Bitbucket and GitHub Repositories</a>
            </div>

              <h4 class="gh_config_h4">Setting up a GitHub OAuth Application</h4>

                <form class="aui" method="post" action="${baseurl}/secure/admin/ConfigureGithubOAuth.jspa">
                  <input type="hidden" name="atl_token" value="$atl_token">
                  If you need to sync only with public GitHub repositories, you can skip the this step and proceed directly to <a href="${baseurl}/secure/admin/ConfigureBitbucketRepositories!default.jspa">configuring your repositories</a>.

                  For private GitHub repositories, complete the following steps:

                  <ol class="gh_steps">
                    <li>Copy the following Callback URL:
                       <div id="repoEntry">
                         <input type="text" class="text long-field" value="${baseurl}">
                       </div>
                   </li>

                   <li>
                      Browse to <a href="https://github.com/account/applications" target="_blank">https://github.com/account/applications</a> to create a new GitHub OAuth Application.

                       <div id="gh_oauth_app_screenshot">
                           <img alt='GitHub Configuration Screenshot' src="${baseurl}/download/resources/com.atlassian.jira.plugins.jira-bitbucket-connector-plugin/images/github_oauth.jpg">
                       </div>
                   </li>

                   <li>
                       Paste the Callback URL into the Callback URL field of the New OAuth Application form.
                   </li>

                   <li>
                      After you create the application, GitHub will provide you with a <strong>Client ID</strong> and a <strong>Client Secret</strong> which you will need to enter below.

                         #if ($action.getMessages() != "")
                             <div id="gh_messages" >
                                    <h2>$action.getMessages()</h2>
                             </div>
                         #end

                         #foreach ($errorMessage in $action.getErrorMessages())
                             <div class="aui-message error shadowed">
                                    <h3>$errorMessage</h3>
                             </div>
                         #end
                         

                      <table width="500px">

                               <tr>
                                 <td>Client ID</td>
                               </tr>
                               <tr>
                                 <td>
                                    <input type="text"
                                    class="text"
                                    id="clientID"
                                    name="clientID"
                                    value="$textutils.htmlEncode($action.getSavedClientID())"
                                    size="60"
                                    />

                                 </td>

                               </tr>

                                 <tr>
                                   <td><label for='clientSecret'>Client Secret</label></td>
                                 </tr>
                                 <tr>
                                   <td>
                                      <input type="text"
                                      class="text"
                                      id="clientSecret"
                                      name="clientSecret"
                                      value="$textutils.htmlEncode($action.getSavedClientSecret())"
                                      size="60"
                                      />

                                   </td>

                                 </tr>

                               <tr>
                                   <td >
                                       <input type="submit" name="Submit" id="Submit" value="Add/Update Keys"
                                       class="spaced"
                                       />
                                   </td>
                               </tr>

                      </table>
                   </li>

                   <li>
                       Once you have completed the OAuth Application setup, you can begin <a href="${baseurl}/secure/admin/ConfigureBitbucketRepositories!default.jspa">configuring your repositories</a>.
                   </li>

                  </ol>

              </form>

  </body>
</html>