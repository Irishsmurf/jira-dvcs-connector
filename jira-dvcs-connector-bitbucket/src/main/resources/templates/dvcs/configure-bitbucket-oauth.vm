<html>
<head>
    <title>Bitbucket OAuth Settings</title>

    <meta name="admin.active.section" content="admin_plugins_menu/source_control"/>
    <meta name="admin.active.tab" content="bitbucket_oauth"/>
</head>

<body>

    #set($baseurl = $action.getBaseUrl())


<h3>Bitbucket OAuth Settings</h3>

<div id='gh_config_link'>
    <a href="${baseurl}/secure/admin/ConfigureBitbucketRepositories!default.jspa">Bulk Configure Bitbucket and GitHub
        Repositories</a>
</div>

<h4 class="gh_config_h4">Setting up a Bitbucket OAuth Application</h4>

<form class="aui" method="post" action="${baseurl}/secure/admin/ConfigureBitbucketOAuth.jspa">
    <input type="hidden" name="atl_token" value="$atl_token">
    If you need to sync only with public Bitbucket repositories, you can skip this step and proceed directly to <a
        href="${baseurl}/secure/admin/ConfigureBitbucketRepositories!default.jspa">configuring your repositories</a>.

    For private Bitbucket repositories, complete the following steps:

    <ol class="gh_steps">
        <li>Ask for OAuth credentials at support@bitbucket.org. More details on <a
                href="http://confluence.atlassian.com/display/BITBUCKET/OAuth+on+Bitbucket">OAuth on Bitbucket</a> page.
        </li>

        <li>
            In response Bitbucket will provide you with a <strong>Client ID</strong> and a <strong>Client
            Secret</strong> which you will need to enter below.

            <table width="500px">

                <tr>
                    <td>Client ID</td>
                </tr>
                <tr>
                    <td>
                        <input type="text"
                               class="text"
                               id="clientID"
                               name="clientID"
                               value="$textutils.htmlEncode($action.getSavedClientID())"
                               size="60"
                                />

                    </td>

                </tr>

                <tr>
                    <td><label for='clientSecret'>Client Secret</label></td>
                </tr>
                <tr>
                    <td>
                        <input type="text"
                               class="text"
                               id="clientSecret"
                               name="clientSecret"
                               value="$textutils.htmlEncode($action.getSavedClientSecret())"
                               size="60"
                                />

                    </td>

                </tr>

                <tr>
                    <td>
                        <input type="submit" name="Submit" id="Submit" value="Add/Update Keys"
                               class="spaced"
                                />
                    </td>
                </tr>

            </table>

            #if ($action.getMessages() != "")
                <div id="gh_messages" class="aui-message success">
                    <h2>$action.getMessages()</h2>
                </div>
            #end

            #foreach ($errorMessage in $action.getErrorMessages())
                <div class="aui-message error shadowed">
                    <h3>$errorMessage</h3>
                </div>
            #end

        </li>


        <li>
            Once you have completed the OAuth Application setup, you can begin <a
                href="${baseurl}/secure/admin/ConfigureBitbucketRepositories!default.jspa">configuring your
            repositories</a>.
        </li>

    </ol>

</form>

</body>
</html>